@import "./theme.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html,
body {
  height: 100%;
  font-family: "Poppins", sans-serif;
  font-size: 14px;
}

/* --- CAMADA DE COMPONENTES --- */
@layer components {
  /* --- CLASSE PADRÃO PARA WIDGETS (BOXES) --- */
  .box-padrao {
    @apply rounded-2xl p-6 flex flex-col gap-4 overflow-hidden h-full w-full transition-colors duration-500 shadow-lg shadow-black/5;

    /* Fundo Mágico: Mistura a cor escolhida com a opacidade */
    background-color: color-mix(
      in srgb,
      var(--box-color, #ffffff) calc(var(--box-opacity, 1) * 100%),
      transparent
    );

    /* Cor do Texto Principal */
    color: var(--box-text-color, #1e293b);
  }

  /* --- CLASSE PADRÃO PARA BARRAS (HEADERS) --- */
  .bar-padrao {
    @apply flex flex-col md:flex-row md:items-center justify-between p-4 rounded-2xl transition-colors duration-500 gap-4 z-20 relative shadow-lg shadow-black/5;

    background-color: color-mix(
      in srgb,
      var(--box-color, #ffffff) calc(var(--box-opacity, 1) * 100%),
      transparent
    );
    color: var(--box-text-color, #1e293b);
  }

  /* Botões utilitários (ícones) dentro das barras */
  .btn-icon {
    @apply p-2 rounded-full transition-colors text-current;
    background-color: rgba(127, 127, 127, 0.1);
  }
  .btn-icon:hover {
    background-color: rgba(127, 127, 127, 0.2);
  }

  /* Menu Item da Sidebar */
  .menu-item {
    @apply w-full text-left px-3 py-2.5 hover:bg-primary hover:text-primary rounded-lg text-sm flex items-center gap-2 transition-colors text-foreground font-medium;
  }
}

/* --- REGRAS GLOBAIS DE COERÊNCIA (Crucial para Dark Mode) --- */

/* 1. Textos secundários (cinzas) ficam transparentes da cor principal */
.box-padrao .text-muted-foreground,
.bar-padrao .text-muted-foreground {
  color: inherit !important;
  opacity: 0.6;
}

/* 2. Ícones SVG herdam a cor do texto */
.box-padrao svg,
.bar-padrao svg {
  color: currentColor;
}

/* 3. INPUTS, SELECTS E TEXTAREAS (Correção dos fundos brancos) */
.box-padrao input,
.box-padrao select,
.box-padrao textarea,
.bar-padrao input,
.bar-padrao select,
.bar-padrao textarea {
  @apply transition-colors outline-none rounded-lg;

  /* Força fundo transparente escuro e borda sutil */
  background-color: rgba(127, 127, 127, 0.1) !important;
  border: 1px solid transparent !important;
  color: inherit !important;
}

.box-padrao input:focus,
.box-padrao select:focus,
.box-padrao textarea:focus {
  border-color: var(--primary) !important;
  background-color: rgba(127, 127, 127, 0.15) !important;
}

/* Placeholder */
.box-padrao input::placeholder,
.box-padrao select::placeholder,
.box-padrao textarea::placeholder,
.bar-padrao input::placeholder {
  color: currentColor;
  opacity: 0.4;
}

.inverted-mode iframe,
.inverted-mode video,
.inverted-mode img.no-invert {
  filter: invert(1) hue-rotate(180deg);
}
